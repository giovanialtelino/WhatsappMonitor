@page "/user/{userid}"

@using System.IO;
@inject Services.ApiService apiServices
@using WhatsappMonitor.Shared.Models
@using WhatsappMonitor.Blazor.Pages.Chat

<div class="form-row">
@if(user == null)
{
    <p><em>Loading...</em></p>
}
else
{
<h2>@user.Name</h2>
}
</div>

<div class="form-row mx-auto">
    <div class="form-group col-2">
        <button type="button" class="btn btn-primary" @onclick="(() => ChangeSelected(0))">Chat Info</button>
    </div>
    <div class="form-group col-2">
        <button type="button" class="btn btn-primary" @onclick="(() => ChangeSelected(1))">Chat Reader</button>
    </div>
    <div class="form-group col-2">
<button type="button" class="btn btn-primary" @onclick="(() => ChangeSelected(2))">Chat Searcher</button>
    </div>
    <div class="form-group col-2">
<button type="button" class="btn btn-primary" @onclick="(() => ChangeSelected(3))">Chat Participants</button>
    </div>
    <div class="form-group col-2">
<button type="button" class="btn btn-primary" @onclick="(() => ChangeSelected(4))">Upload Dates</button>
    </div>
</div>

<div class="form-row">
@if(selected == 0)
{

}
else if(selected == 1)
{
 <div class="form-row">
    <Upload 
    Type = "groups"
    Id = "@user.Id" />
 </div>   
 <div class="form-row">
     <UploadDates
     Type = "groups"
     Id ="@user.Id"/>
 </div>
}

 
</div>


@code{
    [Parameter]
    public String UserId { get; set; }
    public User user { get; set; }
    public int selected {get;set;}

    protected override async Task OnInitializedAsync()
    {
        selected = 0;
        await GetUser();
    }
    public async Task GetUser()
    {
        user = await apiServices.GetUserByIdAsync(UserId);
    }

    public void ChangeSelected(int i)
    {
        selected = i;
    }
}